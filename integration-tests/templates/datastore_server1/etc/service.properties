# Unique code of this Data Store Server. Not more than 40 characters.
data-store-server-code = DSS1

# The root directory of the data store
storeroot-dir = ../data/main-store

# The directory where the command queue file is located; defaults to storeroot-dir 
commandqueue-dir =

# Port
port = 8444

# Session timeout in minutes
session-timeout = 30

# Path to the keystore
keystore.path = etc/openBIS.keystore

# Password of the keystore
keystore.password = changeit

# Key password of the keystore
keystore.key-password = changeit

# The check interval (in seconds)
check-interval = 2

# The time-out for clean up work in the shutdown sequence (in seconds).
# Note that that the maximal time for the shutdown sequence to complete can be as large 
# as twice this time.
shutdown-timeout = 2

# If free disk space goes below value defined here, a notification email will be sent.
# Value must be specified in kilobytes (1048576 = 1024 * 1024 = 1GB). If no high water mark is
# specified or if value is negative, the system will not be watching.
highwater-mark = 1048576

# The URL of the LIMS server
server-url = https://localhost:8443/openbis/openbis

# The username to use when contacting the LIMS server
username = etlserver1

# The password to use when contacting the LIMS server
password = <change this>

# The base URL for Web client access.
download-url = https://localhost:8444

# SMTP properties (must start with 'mail' to be considered). 
mail.smtp.host = mail.ethz.ch
# mail.from = datastore_server@localhost
# mail.smtp.user = 
# mail.smtp.password = 

# Maximum number of retries if renaming failed.
# renaming.failure.max-retries = 12

# The number of milliseconds to wait before retrying to execute the renaming process.
# renaming.failure.millis-to-sleep = 5000

# Globally used separator character which separates entities in a data set file name 
data-set-file-name-entity-separator = _

processors = DATA_ACQUISITION
processor.DATA_ACQUISITION.prefix-for-relative-paths = ../data/
processor.DATA_ACQUISITION.data-set-code-prefix-glue = ${data-set-file-name-entity-separator}
processor.DATA_ACQUISITION.finished-file-template = .MARKER_openbis_is_finished_{0}
processor.DATA_ACQUISITION.parameters-file = processing-parameters-from-openbis
# Can be one of PROPRIETARY (the data as acquired from the measurement device) 
# or BDS_DIRECTORY (the data in BDS format in a directory container).
processor.DATA_ACQUISITION.input-storage-format = PROPRIETARY

# Comma separated names of processing threads. Each thread should have configuration properties prefixed with its name
# E.g. 'code-extractor' property for the thread 'my-etl' should be specified as 'my-etl.code-extractor'
inputs=raw-data,image-analysis

# ---------------------------------------------------------------------------
# Raw data thread
# ---------------------------------------------------------------------------
# The directory to watch for incoming data.
raw-data.incoming-dir = ../data/out-raw

# The extractor plugin class to use for data set information extraction
raw-data.data-set-info-extractor = ch.systemsx.cisd.etlserver.threev.DataSetInfoExtractorForDataAcquisition
# Separator used to extract the barcode in the data set file name
raw-data.data-set-info-extractor.entity-separator = ${data-set-file-name-entity-separator}
raw-data.data-set-info-extractor.space-code = CISD
raw-data.data-set-info-extractor.index-of-data-producer-code = 0
raw-data.data-set-info-extractor.index-of-data-production-date = 1
raw-data.data-set-info-extractor.data-production-date-format = yyyyMMddHHmm
raw-data.data-set-info-extractor.indices-of-data-set-code-entities = 0 -1
raw-data.data-set-info-extractor.data-set-code-entities-glue = -
# ...........................................................................

# The extractor plugin class to use for type extraction
raw-data.type-extractor = ch.systemsx.cisd.etlserver.SimpleTypeExtractor
raw-data.type-extractor.file-format-type = TIFF
raw-data.type-extractor.locator-type = RELATIVE_LOCATION
raw-data.type-extractor.data-set-type = HCS_IMAGE
raw-data.type-extractor.processor-type = DATA_ACQUISITION 

# The storage processor plugin (IStorageProcessor implementation)
# raw-data.storage-processor = ch.systemsx.cisd.etlserver.DefaultStorageProcessor
raw-data.storage-processor = ch.systemsx.cisd.etlserver.BDSStorageProcessor
raw-data.storage-processor.version = 1.1
raw-data.storage-processor.sampleTypeCode = CELL_PLATE
raw-data.storage-processor.sampleTypeDescription = Screening Plate
raw-data.storage-processor.format = HCS_IMAGE V1.0
raw-data.storage-processor.number_of_channels = 2
raw-data.storage-processor.contains_original_data = TRUE
raw-data.storage-processor.well_geometry = 3x3
raw-data.storage-processor.file-extractor = ch.systemsx.cisd.etlserver.imsb.HCSImageFileExtractor

# ---------------------------------------------------------------------------
# image-analysis thread
# ---------------------------------------------------------------------------
image-analysis.incoming-dir = ../data/out-analysis

image-analysis.data-set-info-extractor = ch.systemsx.cisd.etlserver.DefaultDataSetInfoExtractor
# Separator used to extract the barcode in the data set file name
image-analysis.data-set-info-extractor.entity-separator = ${data-set-file-name-entity-separator}
image-analysis.data-set-info-extractor.space-code = CISD
# ...........................................................................

# The extractor class to use for type extraction
image-analysis.type-extractor = ch.systemsx.cisd.etlserver.SimpleTypeExtractor
image-analysis.type-extractor.file-format-type = 3VPROPRIETARY
image-analysis.type-extractor.locator-type = RELATIVE_LOCATION
image-analysis.type-extractor.data-set-type = HCS_IMAGE_ANALYSIS_DATA
image-analysis.type-extractor.is-measured = false

# The storage processor (IStorageProcessor implementation)
image-analysis.storage-processor = ch.systemsx.cisd.etlserver.DefaultStorageProcessor

